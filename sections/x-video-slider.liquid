{% comment %}
  X Video Slider Section
{% endcomment %}

{{ 'x-video-slider.css' | asset_url | stylesheet_tag }}

<section
        id="x-video-slider"
        class="x-video-slider"
        style="
                background: {{ section.settings.bg_color }};
                padding-top: {{ section.settings.padding_top_mobile }}px;
                padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
                "
>
    <style>
        @media(min-width: 1024px){
            #x-video-slider {
                padding-top: {{ section.settings.padding_top_desktop }}px !important;
                padding-bottom: {{ section.settings.padding_bottom_desktop }}px !important;
            }
        }
    </style>

    <div class="container">
        {% if section.settings.subtitle != blank %}
            <p class="x-video-subtitle">{{ section.settings.subtitle }}</p>
        {% endif %}

        {% if section.settings.title != blank %}
            <h2 class="x-video-title">{{ section.settings.title }}</h2>
        {% endif %}

        <div class="swiper x-video-swiper">
            <div class="swiper-wrapper">

                {% for block in section.blocks %}
                    <div class="swiper-slide" id="slide-{{ block.id }}">

                        <div class="slide-inner">

                            <!-- LEFT TEXT -->
                            <div class="slide-text">
                              <div class="slide-text-meta">
                                  <span class="slide-count">{{ forloop.index }} of {{ section.blocks.size }}</span>
                                  <span class="slide-text-meta-divider">/</span>
                                  <span class="slide-count">{{ block.settings.slide_title }}</span>
                              </div>
                               

                                {% if block.settings.slide_title %}
                                    <h3 class="slide-title">{{ block.settings.slide_title }}</h3>
                                {% endif %}

                                {% if block.settings.slide_description %}
                                    <p class="slide-description">{{ block.settings.slide_description }}</p>
                                {% endif %}
                            </div>

                            <!-- RIGHT MEDIA -->
                            <div class="slide-media">
                                {% if block.settings.slide_media %}
                                    {% assign media = block.settings.slide_media %}

                                    {% if media.media_type == 'image' %}
                                        <img src="{{ media | image_url: width: 900 }}"
                                                alt="{{ block.settings.slide_title }}"
                                                loading="lazy"
                                                width="{{ media.width }}"
                                                height="{{ media.height }}"
                                        >

                                    {% elsif media.media_type == 'video' %}
                                        {{ media | video_tag: autoplay: true, loop: true, muted: true, controls: false }}
                                    {% endif %}
                                {% endif %}
                            </div>

                        </div>

                    </div>
                {% endfor %}

            </div>

            <!-- Navigation -->
            <div class="x-video-nav">
                <div class="swiper-button-prev">
                  {{- 'slider-arrow-right.svg' | inline_asset_content -}}
                </div>
                <div class="swiper-button-next">
                  {{- 'slider-arrow-right.svg' | inline_asset_content -}}
                </div>
            </div>

        </div>
    </div>
</section>

{{ 'x-video-slider.js' | asset_url | script_tag }}
 
{% schema %}
{
  "name": "X Video Slider",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#2d2624"
    },
    {
      "type": "header",
      "content": "Desktop Padding"
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "label": "Padding top (desktop)",
      "default": 100,
      "min": 0,
      "max": 300,
      "step": 10
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "label": "Padding bottom (desktop)",
      "default": 100,
      "min": 0,
      "max": 300,
      "step": 10
    },
    {
      "type": "header",
      "content": "Mobile Padding"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Padding top (mobile)",
      "default": 58,
      "min": 0,
      "max": 200,
      "step": 2
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Padding bottom (mobile)",
      "default": 58,
      "min": 0,
      "max": 200,
      "step": 2
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "text",
          "id": "slide_title",
          "label": "Slide title"
        },
        {
          "type": "textarea",
          "id": "slide_description",
          "label": "Slide description"
        },
        {
          "type": "video",
          "id": "slide_media",
          "label": "Image or Video"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "X Video Slider",
      "category": "Custom"
    }
  ]
}
{% endschema %}
